<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The Z2 Project: When Writing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
  // initialize dark mode toggle (safe â€“ initialization is idempotent)
  if (typeof DoxygenAwesomeDarkModeToggle !== 'undefined') {
    DoxygenAwesomeDarkModeToggle.init();
  }
  // some versions expose a global initializer; keep it safe
  if (typeof DoxygenAwesome !== 'undefined' && typeof DoxygenAwesome.init === 'function') {
    DoxygenAwesome.init();
  }
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_cropped.png"/></td>
  <td id="projectalign">
   <div id="projectname">The Z2 Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_wiki_Coding_Convention.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">When Writing </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Avoid Broadcasting in C++:</b> Broadcasting is a complex process that required substantial engineering effort from the NumPy team to implement efficiently. Rather than reimplementing ourself broadcasting in C++, either:</p><ul>
<li>Perform broadcasting in Python before passing data to C++</li>
<li>Use pybind11's <a href="https://pybind11.readthedocs.io/en/stable/advanced/pycpp/numpy.html#vectorizing-functions">vectorize</a> functionality when dealing with simple functions</li>
</ul>
<p><b>Avoid Uncontiguous Data</b>: The speedup made by this library is mainly due to the contiguity of NDArrays, and how this property can be exploited with extreme compiler optimizations (SIMD) or by careful implementation of certain patterns and structure. For uncontiguous data, either: TODO: EXPLAIN CONTIGUITY IN DETAIL!</p><ul>
<li>Rearange the data in Python before passing it to C++</li>
<li>Explicitly state that slowdowns may occur (idk).</li>
</ul>
<p><b>Memory Management:</b> C++ lacks garbage collection or Rust's borrow checker, so you must manually manage memory efficiently:</p><ul>
<li>Track pointer lifetimes carefully to avoid dangling pointers</li>
<li>Prefer zero-copy operations whenever possible</li>
<li>Only allocate new memory when necessary</li>
</ul>
<p><b>Type Specifications:</b></p><ul>
<li>Use <code>py::array_t&lt;TYPE&gt;</code> for typed arrays (e.g., <code>py::array_t&lt;float&gt;</code> for NDArrays of floats)</li>
<li>Use generic <code>py::array</code> for Voids (packed binary data)</li>
</ul>
<p><b>Binary Data Types:</b> Since C++ has no native 'binary' type, a substitute one must be chosen instead. Use these types because they guarantee exact bit lengths and support both arithmetic and binary operations:</p><ul>
<li><code>uint64_t</code>: 64-bit unsigned integer (for large data inputs)</li>
<li><code>uint8_t</code>: 8-bit unsigned integer (for small data)</li>
<li><code>int64_t</code>: 64-bit signed integer. Use ONLY for returning outputs</li>
</ul>
<p>Avoid:</p><ul>
<li><code>std::byte</code> (no arithmetic support) TODO: Clarify size garantees</li>
<li><code>unsigned char</code> (no size guarantee)</li>
<li><code>unsigned long long int</code> (unnecessarily verbose)</li>
</ul>
<p><b>Do not use <code>using namespace std;</code></b> While convenient, namespace imports create ambiguity in low-level code. Both the standard library and pybind11 may define functions with identical names (e.g., <code>make_tuple()</code>), which would result in unpredicable function calls. Explicit namespace prefixes ensure:</p><ul>
<li>Functions are called from the correct library</li>
<li>Code behavior is predictable</li>
<li>Future maintainers understand the code's intent</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md2"></a>
Comments</h1>
<p>In Python files, use Docstrings: </p><div class="fragment"><div class="line"><span class="keyword">def </span>add_integers(a:int, b:int) -&gt; int:</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    Calculates the sum of two integers</span></div>
<div class="line"><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="stringliteral">        a (int): The first operand</span></div>
<div class="line"><span class="stringliteral">        b (int): The second operand</span></div>
<div class="line"><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="stringliteral">        int: The sum of both inputs</span></div>
<div class="line"><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">    </span><span class="keywordflow">return</span> a + b</div>
</div><!-- fragment --><p>In C++, use Doxygen comments: </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> add_integers(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b) {</div>
<div class="line">    <span class="keywordflow">return</span> a + b;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md4"></a>
Formatting</h1>
<p>Please format your files using the project's [[auto-formatters|External Tools::Auto-formatters]]. A GitHub Action will perform checks on every push to detect if all files were correctly formatted. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
